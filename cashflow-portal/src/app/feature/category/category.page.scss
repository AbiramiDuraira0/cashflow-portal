// CSS variables for easy theming
:root {
  --bg: #0b1020;
  --card: #121935;
  --muted: #94a3b8;
  --text: #e5e7eb;
  --border: #1f274a;
  --primary: #5b8cff; // adjust to your brand
  --shadow: 0 10px 25px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.02);
}

/* Remove common “reveal on hover/focus” gates */
.reveal-on-hover,
.reveal-on-hover *,
.card .hidden-on-load,
.widget .hidden-on-load {
  opacity: 1 !important;
  visibility: visible !important;
}

.card:focus-within *,
.card:hover *,
.widget:focus-within *,
.widget:hover * {
  opacity: 1 !important;      /* keep visible even without hover */
  transform: none !important;  /* cancel animated in states */
}

.category {
  color: var(--text);
  padding: clamp(16px, 2vw, 24px);

  .toolbar {
    display: grid;
    grid-template-columns: 1fr auto;
    gap: 16px;
    align-items: center;
    margin-bottom: 18px;

    .titles {
      h1 {
        margin: 0;
        font-size: clamp(20px, 2.2vw, 28px);
        letter-spacing: .2px;
      }
      .subtitle {
        margin: 4px 0 0;
        color: var(--muted);
        font-size: 13.5px;
      }
    }

    .actions {
      display: flex;
      gap: 12px;
      align-items: center;

      .search {
        position: relative;
        width: min(46vw, 340px);
        .search-icon {
          position: absolute;
          left: 10px;
          top: 50%;
          transform: translateY(-50%);
          opacity: .65;
        }
        input {
          width: 100%;
          padding: 10px 12px 10px 34px;
          background: var(--card);
          color: var(--text);
          border: 1px solid var(--border);
          border-radius: 10px;
          outline: none;
          transition: border .2s, box-shadow .2s;
          &:focus {
            border-color: color-mix(in srgb, var(--primary) 60%, white 0%);
            box-shadow: 0 0 0 3px rgba(91, 140, 255, .15);
          }
        }
      }

      %btn-base {
        border: 1px solid transparent;
        background: linear-gradient(
          180deg,
          color-mix(in srgb, var(--primary) 90%, white 0%),
          var(--primary)
        );
        color: #fff;
        padding: 10px 14px;
        border-radius: 10px;
        cursor: pointer;
        font-weight: 600;
        transition: transform .05s ease, filter .2s;
        box-shadow: var(--shadow);
      }

      .btn {
        @extend %btn-base;
        &:active { transform: translateY(1px); }
        &.primary { }
      }
    }
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(min(260px, 100%), 1fr));
    gap: 16px;
  }

  .card {
    background:
      radial-gradient(120% 120% at 10% 10%, rgba(255,255,255,.04), transparent 60%),
      var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    box-shadow: var(--shadow);
    padding: 12px;
    cursor: pointer;
    transition: transform .15s ease, border-color .2s, box-shadow .2s, background .3s;

    &:hover {
      transform: translateY(-2px);
      border-color: color-mix(in srgb, var(--primary) 40%, var(--border));
      box-shadow: 0 14px 30px rgba(0,0,0,.4);
      background:
        radial-gradient(120% 120% at 0% 0%, rgba(91,140,255,.06), transparent 60%),
        var(--card);
    }

    &:focus-visible {
      outline: 3px solid rgba(91,140,255,.35);
      outline-offset: 2px;
    }

    .chip {
      display: grid;
      grid-template-columns: auto 1fr auto;
      gap: 10px;
      align-items: center;
      padding: 8px;
      border-radius: 10px;
      background:
        linear-gradient(0deg, rgba(255,255,255,.02), rgba(255,255,255,.02)),
        color-mix(in srgb, var(--chip, #334155) 12%, var(--card));
      border: 1px solid color-mix(in srgb, var(--chip, #334155) 35%, var(--border));

      .avatar {
        width: 38px;
        height: 38px;
        display: grid;
        place-items: center;
        font-size: 20px;
        border-radius: 9px;
        color: #fff;
        box-shadow: inset 0 0 0 2px rgba(255,255,255,.1);
      }

      .meta {
        h3 {
          margin: 0;
          font-size: 16.5px;
          letter-spacing: .2px;
        }
        p {
          margin: 2px 0 0;
          color: var(--muted);
          font-size: 12.5px;
        }
      }

      .menu {
        display: flex;
        gap: 6px;
        .icon {
          border: 1px solid var(--border);
          background: #0f1530;
          color: var(--text);
          border-radius: 8px;
          width: 34px;
          height: 34px;
          display: grid;
          place-items: center;
          cursor: pointer;
          transition: background .2s, border .2s, transform .05s ease;
          &:hover { background: #121a3d; border-color: #2a3569; }
          &:active { transform: translateY(1px); }
          &.danger:hover { background: #2a1320; border-color: #6a243e; }
        }
      }
    }

    .content {
      margin-top: 10px;

      .row {
        display: flex;
        justify-content: space-between;
        padding: 6px 4px;
        .label { color: var(--muted); font-size: 12.5px; }
        strong { font-size: 14px; }
        .muted { color: var(--muted); }
      }

      .progress {
        margin-top: 10px;
        display: grid;
        grid-template-columns: 1fr auto;
        align-items: center;
        gap: 10px;

        .bar {
          height: 8px;
          background: #0d1329;
          border: 1px solid var(--border);
          border-radius: 999px;
          overflow: hidden;
          .fill {
            height: 100%;
            width: 0%;
            transition: width .4s ease;
          }
        }
        .progress-text {
          font-size: 12.5px;
          color: var(--muted);
          &.warn { color: #f59e0b; }
        }
      }
    }

    &.skeleton {
      height: 150px;
      background: linear-gradient(90deg, #0f1530 25%, #141c3d 37%, #0f1530 63%);
      background-size: 400% 100%;
      animation: shimmer 1.2s infinite;
      border: 1px solid var(--border);
    }
  }

  .empty {
    display: grid;
    place-items: center;
    padding: 40px 0;
    .empty-card {
      text-align: center;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 26px;
      box-shadow: var(--shadow);
      .emoji { font-size: 40px; margin-bottom: 8px; }
      h2 { margin: 0 0 6px; }
      p { color: var(--muted); margin-bottom: 12px; }
      .btn {
        border: 1px solid transparent;
        background: linear-gradient(
          180deg,
          color-mix(in srgb, var(--primary) 90%, white 0%),
          var(--primary)
        );
        color: #fff;
        padding: 10px 14px;
        border-radius: 10px;
        cursor: pointer;
        font-weight: 600;
        transition: transform .05s ease, filter .2s;
        box-shadow: var(--shadow);
      }
    }
  }
}

@keyframes shimmer {
  0%   { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}